\newcommand{\DocTitle}{AstraKernel Documentation}
\newcommand{\DocAuthor}{Chris Dedman}
\newcommand{\DocDate}{\today}
\title{\DocTitle}
\author{\DocAuthor}
\date{\DocDate}
% -----------------------------------------------------

% Layout: 1-inch margins all around
\geometry{letterpaper, margin=1in}

% Subtle warm page background for screen reading
\definecolor{pagebg}{RGB}{251,250,247}
\pagecolor{pagebg}

%— Base pagestyle: no headers, footer at center
\fancypagestyle{base}{
  \fancyhf{}
  \cfoot{\thepage}
  \renewcommand{\headrulewidth}{0pt}
}

%— Preliminary pages (uses 'base', but moves foot up)
\fancypagestyle{prelim}{
  \fancyhf{}
  \cfoot{\thepage}
  \renewcommand{\headrulewidth}{0pt}
  \setlength{\footskip}{0.5in}
}

%— Main body pages (page number in header)
\fancypagestyle{main}{
  \fancyhf{}
  \renewcommand{\headrulewidth}{0pt}
  \fancyhead[R]{\thepage}
  \setlength{\headsep}{0.6in}
}


% Code style (vibrant but consistent)
\definecolor{codegray}{gray}{0.97}
\definecolor{accent}{RGB}{26,94,122}
\definecolor{codeblue}{RGB}{26,94,122}
\definecolor{codered}{RGB}{136,44,32}
\definecolor{codegreen}{RGB}{46,92,62}
\lstset{
    basicstyle=\ttfamily\footnotesize\raggedright,
    keywordstyle=\color{codeblue},
    stringstyle=\color{codered},
    commentstyle=\color{codegreen},
    numbers=left,
    numberstyle=\tiny\color{gray},
    stepnumber=1,
    numbersep=5pt,
    backgroundcolor=\color{codegray},
    showspaces=false,
    showstringspaces=false,
    showtabs=false,
    frame=single,
    framerule=0.3pt,
    tabsize=2,
    captionpos=b,
    breaklines=true,
    columns=fullflexible,
    keepspaces=true,
    breakatwhitespace=false,
    aboveskip=0.75\baselineskip,
    belowskip=0.75\baselineskip,
    escapeinside={\%*}{*)}
}

\hyphenation{op-tical net-works semi-conduc-tor}

\renewcommand{\thesection}{\Roman{section}.}
\renewcommand{\thesubsection}{\Alph{subsection}.}

\newcommand{\code}[1]{\texttt{\textcolor{codeblue}{#1}}}
\makeatletter
% === redefine \section so it has less (even negative) vertical space before it
\renewcommand\section{%
  \@startsection{section}% <name>
    {1}%               <level>
    {\z@}%             <indent>
    {-3ex \@plus -1ex \@minus -.2ex}%  <beforeskip>
    {1ex \@plus .2ex}%                <afterskip>
    {\normalfont\Large\bfseries}%     <style>
}
\makeatother

% Make \paragraph a block heading to avoid run-in overlap with listings
\makeatletter
\renewcommand\paragraph{%
  \@startsection{paragraph}%
    {4}%
    {\z@}%
    {1.0ex \@plus .2ex}%
    {0.6ex \@plus .2ex}%
    {\normalfont\normalsize\bfseries}%
}
\makeatother

% Customizing captions
\captionsetup{font=small, labelfont=bf, skip=6pt}

% Avoid header height warnings with fancyhdr
\setlength{\headheight}{14pt}

% Chapter spacing (titlesec)
\titlespacing*{\chapter}{0pt}{-6pt}{18pt}


% HYPERLINKS & METADATA
\hypersetup{
  pdftitle   = {\DocTitle},
  pdfauthor  = {\DocAuthor},
  pdfkeywords = {AstraKernel, Documentation, LaTeX},
  pdfsubject = {AstraKernel Documentation},
  colorlinks=true,
  citecolor=accent,
  linkcolor=accent,
  filecolor=accent,
  urlcolor=accent,
}

% Custom command for INFO boxes
\makeatletter
\newenvironment{info}{%
  \par\medskip
  \noindent\textbf{INFO:}\quad%
  \begin{quote}%
}{%
  \end{quote}\par\medskip
}
\makeatother

% Custom command for NOTE boxes
\makeatletter
\newenvironment{note}{%
  \par\medskip
  \noindent\textbf{NOTE:}\quad%
  \begin{quote}%
}{%
  \end{quote}\par\medskip
}
\makeatother
